<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bioqu√≠mica Celular: Laborat√≥rio Molecular</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            text-shadow: 3px 3px 5px rgba(0, 0, 0, 0.5);
            background: linear-gradient(to right, #00c6ff, #0072ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #e0e0e0;
        }

        .game-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }

        .lab-area {
            flex: 2;
            min-width: 300px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .info-panel {
            flex: 1;
            min-width: 300px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .lab-bench {
            width: 100%;
            height: 400px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .molecule {
            position: absolute;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px black;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
            border-radius: 50%;
        }

        .molecule:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
        }

        .glucose {
            background: radial-gradient(circle, #56ab2f, #a8e063);
            width: 80px;
            height: 80px;
        }

        .atp {
            background: radial-gradient(circle, #ff416c, #ff4b2b);
            width: 70px;
            height: 70px;
        }

        .amino-acid {
            background: radial-gradient(circle, #7b4397, #dc2430);
            width: 60px;
            height: 60px;
        }

        .enzyme {
            background: radial-gradient(circle, #00c9ff, #92fe9d);
            width: 90px;
            height: 90px;
        }

        .lipid {
            background: radial-gradient(circle, #f46b45, #eea849);
            width: 75px;
            height: 75px;
        }

        .dna {
            background: radial-gradient(circle, #8e2de2, #4a00e0);
            width: 100px;
            height: 50px;
            border-radius: 50px/25px;
        }

        .rna {
            background: radial-gradient(circle, #ffcc00, #ff8800);
            width: 90px;
            height: 45px;
            border-radius: 45px/22px;
        }

        .protein {
            background: radial-gradient(circle, #4a90e2, #2457a3);
            width: 85px;
            height: 85px;
            border-radius: 20px;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        button {
            background: linear-gradient(to right, #00c6ff, #0072ff);
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        button:active {
            transform: translateY(1px);
        }

        .info-content {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            height: 200px;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .experiment-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .experiment-question {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .experiment-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .experiment-option {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .experiment-option:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .score-board {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            margin-top: 10px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(to right, #00c9ff, #92fe9d);
            width: 0%;
            transition: width 0.5s;
        }

        .molecule-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }

        .molecule-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .molecule-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }

        .molecule-item.analyzed {
            background: rgba(0, 200, 0, 0.3);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: linear-gradient(135deg, #0f2027, #203a43);
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .modal h2 {
            margin-bottom: 20px;
            font-size: 2rem;
            background: linear-gradient(to right, #00c6ff, #0072ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .modal p {
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .close-modal {
            background: linear-gradient(to right, #00c6ff, #0072ff);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
        }

        .game-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #00c6ff;
        }

        .reaction-area {
            height: 120px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            margin: 15px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            border: 1px dashed rgba(255, 255, 255, 0.3);
        }

        .reaction-equation {
            font-size: 1.2rem;
            text-align: center;
            padding: 10px;
        }

        .reaction-arrow {
            margin: 0 15px;
            font-size: 1.5rem;
            color: #00c6ff;
        }

        .lab-equipment {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .equipment-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            flex: 1;
        }

        .equipment-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }

        @media (max-width: 768px) {
            .game-container {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2.5rem;
            }
            
            .experiment-options {
                grid-template-columns: 1fr;
            }
            
            .lab-equipment {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Bioqu√≠mica Celular: Laborat√≥rio Molecular</h1>
            <p class="subtitle">Explore as rea√ß√µes qu√≠micas da vida e desvende os segredos das c√©lulas!</p>
        </header>

        <div class="game-container">
            <div class="lab-area">
                <div class="lab-bench" id="labBench">
                    <!-- Mol√©culas ser√£o adicionadas dinamicamente via JavaScript -->
                </div>
                
                <div class="reaction-area" id="reactionArea">
                    <div class="reaction-equation" id="reactionEquation">
                        √Årea de rea√ß√µes bioqu√≠micas
                    </div>
                </div>
                
                <div class="lab-equipment">
                    <div class="equipment-item" id="microscope">
                        üî¨ Microsc√≥pio
                    </div>
                    <div class="equipment-item" id="centrifuge">
                        üß™ Centr√≠fuga
                    </div>
                    <div class="equipment-item" id="spectrometer">
                        üìä Espectr√¥metro
                    </div>
                    <div class="equipment-item" id="reactor">
                        ‚öóÔ∏è Reator
                    </div>
                </div>
                
                <div class="controls">
                    <button id="resetBtn">Novo Experimento</button>
                    <button id="hintBtn">Dica</button>
                    <button id="experimentBtn">Experimento</button>
                </div>
                <div class="progress-bar">
                    <div class="progress" id="progressBar"></div>
                </div>
            </div>

            <div class="info-panel">
                <h2>Informa√ß√µes da Mol√©cula</h2>
                <div class="info-content" id="infoContent">
                    <p>Clique em uma mol√©cula para aprender sobre ela!</p>
                </div>
                
                <h2>Mol√©culas Analisadas</h2>
                <div class="molecule-list" id="moleculeList">
                    <!-- Itens ser√£o adicionados dinamicamente -->
                </div>
                
                <div class="game-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="analyzedCount">0</div>
                        <div class="stat-label">Analisadas</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="experimentScore">0</div>
                        <div class="stat-label">Pontua√ß√£o</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="knowledgeLevel">0%</div>
                        <div class="stat-label">Conhecimento</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="experiment-container" id="experimentContainer" style="display: none;">
            <h2>Experimento Bioqu√≠mico</h2>
            <div class="experiment-question" id="experimentQuestion">
                <!-- Pergunta ser√° inserida aqui -->
            </div>
            <div class="experiment-options" id="experimentOptions">
                <!-- Op√ß√µes ser√£o inseridas aqui -->
            </div>
            <div class="score-board">
                <div>Experimento: <span id="currentExperiment">1</span>/<span id="totalExperiments">5</span></div>
                <div>Acertos: <span id="correctExperiments">0</span></div>
            </div>
        </div>
    </div>

    <!-- Modal de Conclus√£o -->
    <div class="modal" id="completionModal">
        <div class="modal-content">
            <h2>Experimento Conclu√≠do!</h2>
            <p>Voc√™ dominou os conceitos fundamentais da bioqu√≠mica celular!</p>
            <p>Sua pontua√ß√£o final: <span id="finalScore">0</span></p>
            <button class="close-modal" id="closeCompletionModal">Continuar Explorando</button>
        </div>
    </div>

    <!-- Modal de Mol√©cula -->
    <div class="modal" id="moleculeModal">
        <div class="modal-content">
            <h2 id="moleculeModalTitle">T√≠tulo</h2>
            <p id="moleculeModalDescription">Descri√ß√£o</p>
            <div id="moleculeModalFormula" style="margin: 15px 0; font-size: 1.2rem; font-family: monospace;"></div>
            <button class="close-modal" id="closeMoleculeModal">Fechar</button>
        </div>
    </div>

    <!-- Modal de Rea√ß√£o -->
    <div class="modal" id="reactionModal">
        <div class="modal-content">
            <h2 id="reactionModalTitle">Rea√ß√£o Bioqu√≠mica</h2>
            <div id="reactionModalEquation" style="margin: 15px 0; font-size: 1.2rem; font-family: monospace; text-align: center;"></div>
            <p id="reactionModalDescription">Descri√ß√£o</p>
            <button class="close-modal" id="closeReactionModal">Fechar</button>
        </div>
    </div>

    <script>
        // Dados das mol√©culas
        const moleculesData = [
            {
                id: 'glucose',
                name: 'Glicose',
                description: 'A glicose √© um carboidrato simples (monossacar√≠deo) e a principal fonte de energia para as c√©lulas. Atrav√©s do processo de glic√≥lise e respira√ß√£o celular, a glicose √© quebrada para produzir ATP. √â tamb√©m um componente fundamental de carboidratos mais complexos, como amido e celulose.',
                formula: 'C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ',
                color: '#56ab2f',
                size: 80,
                facts: [
                    'Fonte prim√°ria de energia celular',
                    'Monossacar√≠deo com 6 carbonos',
                    'Produz ATP atrav√©s da respira√ß√£o celular',
                    'Armazenada como glicog√™nio em animais'
                ],
                reactions: [
                    {
                        equation: 'C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ ‚Üí 6CO‚ÇÇ + 6H‚ÇÇO + ATP',
                        description: 'Respira√ß√£o celular: processo que quebra a glicose na presen√ßa de oxig√™nio para produzir ATP.'
                    },
                    {
                        equation: 'C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ ‚Üí 2C‚ÇÉH‚ÇÜO‚ÇÉ + 2ATP',
                        description: 'Fermenta√ß√£o l√°tica: quebra da glicose na aus√™ncia de oxig√™nio, produzindo lactato e ATP.'
                    }
                ]
            },
            {
                id: 'atp',
                name: 'ATP',
                description: 'O ATP (adenosina trifosfato) √© a principal mol√©cula de transfer√™ncia de energia nas c√©lulas. Consiste em uma base nitrogenada (adenina), um a√ß√∫car (ribose) e tr√™s grupos fosfato. A quebra da liga√ß√£o entre os grupos fosfato libera energia utiliz√°vel para os processos celulares.',
                formula: 'C‚ÇÅ‚ÇÄH‚ÇÅ‚ÇÜN‚ÇÖO‚ÇÅ‚ÇÉP‚ÇÉ',
                color: '#ff416c',
                size: 70,
                facts: [
                    'Principal mol√©cula de energia celular',
                    'Cont√©m tr√™s grupos fosfato',
                    'Hidr√≥lise do ATP libera energia',
                    'Sintetizado na mitoc√¥ndria e cloroplastos'
                ],
                reactions: [
                    {
                        equation: 'ATP + H‚ÇÇO ‚Üí ADP + P·µ¢ + energia',
                        description: 'Hidr√≥lise do ATP: quebra da mol√©cula de ATP para liberar energia utiliz√°vel.'
                    },
                    {
                        equation: 'ADP + P·µ¢ + energia ‚Üí ATP',
                        description: 'Fosforila√ß√£o: s√≠ntese de ATP a partir de ADP e fosfato inorg√¢nico usando energia.'
                    }
                ]
            },
            {
                id: 'amino-acid',
                name: 'Amino√°cido',
                description: 'Os amino√°cidos s√£o as unidades fundamentais das prote√≠nas. Existem 20 amino√°cidos padr√£o que se diferenciam por suas cadeias laterais. Eles se ligam atrav√©s de liga√ß√µes pept√≠dicas para formar cadeias polipept√≠dicas que se dobram em prote√≠nas funcionais.',
                formula: 'Vari√°vel (ex: C‚ÇÇH‚ÇÑNO‚ÇÇR)',
                color: '#7b4397',
                size: 60,
                facts: [
                    'Unidades construtoras de prote√≠nas',
                    '20 tipos diferentes em seres vivos',
                    'Possuem grupo amina e carboxila',
                    'Ligam-se por liga√ß√µes pept√≠dicas'
                ],
                reactions: [
                    {
                        equation: 'Amino√°cido + Amino√°cido ‚Üí Dipept√≠deo + H‚ÇÇO',
                        description: 'S√≠ntese pept√≠dica: forma√ß√£o de liga√ß√£o pept√≠dica entre amino√°cidos com libera√ß√£o de √°gua.'
                    }
                ]
            },
            {
                id: 'enzyme',
                name: 'Enzima',
                description: 'As enzimas s√£o prote√≠nas especializadas que atuam como catalisadores biol√≥gicos, acelerando as rea√ß√µes qu√≠micas nas c√©lulas sem serem consumidas no processo. Cada enzima √© espec√≠fica para um substrato e funciona diminuindo a energia de ativa√ß√£o necess√°ria para a rea√ß√£o.',
                formula: 'Prote√≠na (estrutura complexa)',
                color: '#00c9ff',
                size: 90,
                facts: [
                    'Catalisadores biol√≥gicos',
                    'Espec√≠ficas para seus substratos',
                    'N√£o s√£o consumidas na rea√ß√£o',
                    'Funcionam em pH e temperatura √≥timos'
                ],
                reactions: [
                    {
                        equation: 'E + S ‚áå ES ‚Üí E + P',
                        description: 'Mecanismo enzim√°tico: a enzima (E) se liga ao substrato (S) formando um complexo (ES) que se converte no produto (P).'
                    }
                ]
            },
            {
                id: 'lipid',
                name: 'Lip√≠dio',
                description: 'Os lip√≠dios s√£o um grupo diverso de mol√©culas hidrof√≥bicas que incluem gorduras, √≥leos, fosfolip√≠dios e esteroides. Desempenham fun√ß√µes importantes como armazenamento de energia, componentes estruturais das membranas celulares e sinaliza√ß√£o celular.',
                formula: 'Vari√°vel (ex: C‚ÇÖ‚ÇÖH‚Çâ‚ÇàO‚ÇÜ para triglicer√≠deo)',
                color: '#f46b45',
                size: 75,
                facts: [
                    'Mol√©culas hidrof√≥bicas',
                    'Fun√ß√µes: energia, estrutura, sinaliza√ß√£o',
                    'Incluem gorduras, fosfolip√≠dios, esteroides',
                    'Componentes das membranas celulares'
                ],
                reactions: [
                    {
                        equation: '√Åcido graxo + Glicerol ‚Üí Triglicer√≠deo + 3H‚ÇÇO',
                        description: 'Esterifica√ß√£o: s√≠ntese de triglicer√≠deos a partir de √°cidos graxos e glicerol.'
                    },
                    {
                        equation: 'Triglicer√≠deo + 3H‚ÇÇO ‚Üí Glicerol + 3√Åcidos graxos',
                        description: 'Lip√≥lise: quebra de triglicer√≠deos em glicerol e √°cidos graxos.'
                    }
                ]
            },
            {
                id: 'dna',
                name: 'DNA',
                description: 'O DNA (√°cido desoxirribonucleico) √© a mol√©cula que armazena a informa√ß√£o gen√©tica em todos os organismos vivos. Consiste em duas cadeias antiparalelas organizadas em uma dupla h√©lice, com nucleot√≠deos contendo as bases adenina, timina, citosina e guanina.',
                formula: 'Pol√≠mero de nucleot√≠deos',
                color: '#8e2de2',
                size: 100,
                facts: [
                    'Armazena informa√ß√£o gen√©tica',
                    'Estrutura de dupla h√©lice',
                    'Bases: A, T, C, G',
                    'Replica-se semiconservativamente'
                ],
                reactions: [
                    {
                        equation: 'DNA + nucleot√≠deos ‚Üí 2DNA (com DNA polimerase)',
                        description: 'Replica√ß√£o do DNA: s√≠ntese de uma nova fita de DNA usando uma fita existente como molde.'
                    }
                ]
            },
            {
                id: 'rna',
                name: 'RNA',
                description: 'O RNA (√°cido ribonucleico) √© uma mol√©cula essencial para a express√£o g√™nica. Existem v√°rios tipos, incluindo mRNA (mensageiro), tRNA (transfer√™ncia) e rRNA (ribossomal). O RNA difere do DNA por ter ribose no lugar de desoxirribose e uracila no lugar de timina.',
                formula: 'Pol√≠mero de ribonucleot√≠deos',
                color: '#ffcc00',
                size: 90,
                facts: [
                    'Envolvido na s√≠ntese proteica',
                    'Tipos: mRNA, tRNA, rRNA',
                    'Bases: A, U, C, G',
                    'Fita simples (geralmente)'
                ],
                reactions: [
                    {
                        equation: 'DNA ‚Üí RNA (com RNA polimerase)',
                        description: 'Transcri√ß√£o: s√≠ntese de RNA usando DNA como molde.'
                    }
                ]
            },
            {
                id: 'protein',
                name: 'Prote√≠na',
                description: 'As prote√≠nas s√£o macromol√©culas formadas por cadeias de amino√°cidos que se dobram em estruturas tridimensionais espec√≠ficas. Desempenham diversas fun√ß√µes, incluindo cat√°lise enzim√°tica, suporte estrutural, transporte, defesa e regula√ß√£o.',
                formula: 'Cadeia polipept√≠dica (estrutura complexa)',
                color: '#4a90e2',
                size: 85,
                facts: [
                    'Fun√ß√µes diversas: enzimas, estrutura, transporte',
                    'Estruturas: prim√°ria, secund√°ria, terci√°ria, quatern√°ria',
                    'Desnatura√ß√£o perde a fun√ß√£o',
                    'Sintetizadas nos ribossomos'
                ],
                reactions: [
                    {
                        equation: 'Amino√°cidos ‚Üí Prote√≠na (com ribossomos)',
                        description: 'Tradu√ß√£o: s√≠ntese de prote√≠nas a partir de amino√°cidos usando informa√ß√£o do mRNA.'
                    }
                ]
            }
        ];

        // Estado do jogo
        const gameState = {
            analyzedMolecules: [],
            experimentScore: 0,
            knowledgeLevel: 0,
            currentExperiment: null,
            experimentAnswers: 0,
            totalExperimentQuestions: 0,
            currentReaction: null
        };

        // Perguntas dos experimentos
        const experimentQuestions = [
            {
                question: "Qual mol√©cula √© a principal fonte de energia para as c√©lulas?",
                options: ["DNA", "Glicose", "Amino√°cido", "Lip√≠dio"],
                correct: 1
            },
            {
                question: "Qual √© a fun√ß√£o principal do ATP na c√©lula?",
                options: ["Armazenar informa√ß√£o gen√©tica", "Transferir energia", "Estrutura celular", "Catalisar rea√ß√µes"],
                correct: 1
            },
            {
                question: "Como s√£o chamadas as unidades fundamentais das prote√≠nas?",
                options: ["Nucleot√≠deos", "Monossacar√≠deos", "Amino√°cidos", "√Åcidos graxos"],
                correct: 2
            },
            {
                question: "O que s√£o enzimas?",
                options: ["Mol√©culas de armazenamento", "Catalisadores biol√≥gicos", "Componentes estruturais", "Horm√¥nios"],
                correct: 1
            },
            {
                question: "Qual mol√©cula armazena a informa√ß√£o gen√©tica?",
                options: ["RNA", "ATP", "DNA", "Prote√≠na"],
                correct: 2
            },
            {
                question: "Qual destes √© um tipo de lip√≠dio?",
                options: ["Glicose", "Triglicer√≠deo", "Amino√°cido", "Nucleot√≠deo"],
                correct: 1
            },
            {
                question: "Qual processo produz ATP a partir da glicose?",
                options: ["Fotoss√≠ntese", "Respira√ß√£o celular", "Transcri√ß√£o", "Tradu√ß√£o"],
                correct: 1
            },
            {
                question: "Onde ocorre a s√≠ntese de prote√≠nas na c√©lula?",
                options: ["N√∫cleo", "Mitoc√¥ndria", "Ribossomo", "Complexo de Golgi"],
                correct: 2
            },
            {
                question: "Qual base nitrogenada √© encontrada no RNA mas n√£o no DNA?",
                options: ["Adenina", "Timina", "Citosina", "Uracila"],
                correct: 3
            },
            {
                question: "Qual √© a principal caracter√≠stica dos lip√≠dios?",
                options: ["Hidrofilia", "Hidrofobia", "Acidez", "Basicidade"],
                correct: 1
            }
        ];

        // Rea√ß√µes bioqu√≠micas
        const biochemicalReactions = [
            {
                id: 'respiration',
                name: 'Respira√ß√£o Celular',
                equation: 'C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ ‚Üí 6CO‚ÇÇ + 6H‚ÇÇO + 36ATP',
                description: 'Processo aer√≥bico que quebra completamente a glicose para produzir ATP. Ocorre na mitoc√¥ndria e envolve tr√™s etapas: glic√≥lise, ciclo de Krebs e cadeia transportadora de el√©trons.'
            },
            {
                id: 'photosynthesis',
                name: 'Fotoss√≠ntese',
                equation: '6CO‚ÇÇ + 6H‚ÇÇO + luz ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ',
                description: 'Processo realizado por plantas, algas e algumas bact√©rias que converte energia luminosa em energia qu√≠mica, produzindo glicose a partir de CO‚ÇÇ e √°gua.'
            },
            {
                id: 'protein-synthesis',
                name: 'S√≠ntese Proteica',
                equation: 'DNA ‚Üí RNA ‚Üí Prote√≠na',
                description: 'Processo de express√£o g√™nica que envolve a transcri√ß√£o (DNA para RNA) e tradu√ß√£o (RNA para prote√≠na). Ocorre no n√∫cleo e ribossomos, respectivamente.'
            },
            {
                id: 'fermentation',
                name: 'Fermenta√ß√£o',
                equation: 'C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ ‚Üí 2C‚ÇÇH‚ÇÖOH + 2CO‚ÇÇ + 2ATP',
                description: 'Processo anaer√≥bico que quebra parcialmente a glicose para produzir ATP. Na fermenta√ß√£o alco√≥lica, produz etanol e CO‚ÇÇ.'
            }
        ];

        // Inicializa√ß√£o do jogo
        document.addEventListener('DOMContentLoaded', function() {
            initializeGame();
            setupEventListeners();
        });

        function initializeGame() {
            createMolecules();
            updateMoleculeList();
            updateStats();
            setupEquipment();
        }

        function createMolecules() {
            const labBench = document.getElementById('labBench');
            
            // Limpar bancada
            labBench.innerHTML = '';
            
            // Criar mol√©culas em posi√ß√µes aleat√≥rias
            moleculesData.forEach(molecule => {
                const moleculeElement = document.createElement('div');
                moleculeElement.className = `molecule ${molecule.id}`;
                moleculeElement.id = molecule.id;
                moleculeElement.textContent = molecule.name.substring(0, 3);
                
                // Posicionamento aleat√≥rio, evitando sobreposi√ß√£o
                let x, y;
                let overlapping = true;
                let attempts = 0;
                
                while (overlapping && attempts < 100) {
                    x = Math.random() * (labBench.offsetWidth - molecule.size);
                    y = Math.random() * (labBench.offsetHeight - molecule.size);
                    
                    overlapping = checkOverlap(x, y, molecule.size);
                    attempts++;
                }
                
                moleculeElement.style.left = `${x}px`;
                moleculeElement.style.top = `${y}px`;
                moleculeElement.style.width = `${molecule.size}px`;
                moleculeElement.style.height = molecule.id === 'dna' || molecule.id === 'rna' ? 
                    `${molecule.size/2}px` : `${molecule.size}px`;
                
                labBench.appendChild(moleculeElement);
            });
        }

        function checkOverlap(x, y, size) {
            const molecules = document.querySelectorAll('.molecule');
            for (let molecule of molecules) {
                const rect = molecule.getBoundingClientRect();
                const benchRect = document.getElementById('labBench').getBoundingClientRect();
                
                const molX = rect.left - benchRect.left;
                const molY = rect.top - benchRect.top;
                const molWidth = molecule.offsetWidth;
                const molHeight = molecule.offsetHeight;
                
                // Verificar se h√° sobreposi√ß√£o
                if (x < molX + molWidth && x + size > molX && y < molY + molHeight && y + size > molY) {
                    return true;
                }
            }
            return false;
        }

        function setupEventListeners() {
            // Event listeners para mol√©culas
            document.querySelectorAll('.molecule').forEach(molecule => {
                molecule.addEventListener('click', function() {
                    const moleculeData = moleculesData.find(m => m.id === this.id);
                    showMoleculeInfo(moleculeData);
                    
                    // Marcar como analisada se ainda n√£o foi
                    if (!gameState.analyzedMolecules.includes(this.id)) {
                        gameState.analyzedMolecules.push(this.id);
                        updateMoleculeList();
                        updateStats();
                        
                        // Verificar se todas as mol√©culas foram analisadas
                        if (gameState.analyzedMolecules.length === moleculesData.length) {
                            showCompletionModal();
                        }
                    }
                });
            });

            // Event listeners para bot√µes
            document.getElementById('resetBtn').addEventListener('click', function() {
                createMolecules();
                setupEventListeners(); // Reaplicar event listeners √†s novas mol√©culas
                document.getElementById('reactionEquation').textContent = '√Årea de rea√ß√µes bioqu√≠micas';
            });

            document.getElementById('hintBtn').addEventListener('click', function() {
                // Encontrar uma mol√©cula n√£o analisada
                const unanalyzed = moleculesData.filter(m => !gameState.analyzedMolecules.includes(m.id));
                if (unanalyzed.length > 0) {
                    const randomMolecule = unanalyzed[Math.floor(Math.random() * unanalyzed.length)];
                    const moleculeElement = document.getElementById(randomMolecule.id);
                    
                    // Piscar a mol√©cula
                    moleculeElement.style.boxShadow = '0 0 20px yellow';
                    setTimeout(() => {
                        moleculeElement.style.boxShadow = '';
                    }, 1000);
                } else {
                    alert('Voc√™ j√° analisou todas as mol√©culas!');
                }
            });

            document.getElementById('experimentBtn').addEventListener('click', function() {
                startExperiment();
            });

            // Event listeners para modais
            document.getElementById('closeCompletionModal').addEventListener('click', function() {
                document.getElementById('completionModal').style.display = 'none';
            });

            document.getElementById('closeMoleculeModal').addEventListener('click', function() {
                document.getElementById('moleculeModal').style.display = 'none';
            });

            document.getElementById('closeReactionModal').addEventListener('click', function() {
                document.getElementById('reactionModal').style.display = 'none';
            });

            // Fechar modal ao clicar fora
            window.addEventListener('click', function(event) {
                const completionModal = document.getElementById('completionModal');
                const moleculeModal = document.getElementById('moleculeModal');
                const reactionModal = document.getElementById('reactionModal');
                
                if (event.target === completionModal) {
                    completionModal.style.display = 'none';
                }
                if (event.target === moleculeModal) {
                    moleculeModal.style.display = 'none';
                }
                if (event.target === reactionModal) {
                    reactionModal.style.display = 'none';
                }
            });
        }

        function setupEquipment() {
            document.getElementById('microscope').addEventListener('click', function() {
                showRandomMoleculeDetail();
            });

            document.getElementById('centrifuge').addEventListener('click', function() {
                separateMolecules();
            });

            document.getElementById('spectrometer').addEventListener('click', function() {
                analyzeComposition();
            });

            document.getElementById('reactor').addEventListener('click', function() {
                showRandomReaction();
            });
        }

        function showMoleculeInfo(moleculeData) {
            const infoContent = document.getElementById('infoContent');
            let factsHTML = '';
            
            moleculeData.facts.forEach(fact => {
                factsHTML += `<li>${fact}</li>`;
            });
            
            let reactionsHTML = '';
            moleculeData.reactions.forEach(reaction => {
                reactionsHTML += `<div style="margin-top: 10px;"><strong>${reaction.equation}</strong><br>${reaction.description}</div>`;
            });
            
            infoContent.innerHTML = `
                <h3>${moleculeData.name}</h3>
                <p><strong>F√≥rmula:</strong> ${moleculeData.formula}</p>
                <p>${moleculeData.description}</p>
                <h4>Caracter√≠sticas:</h4>
                <ul>${factsHTML}</ul>
                <h4>Rea√ß√µes Envolvidas:</h4>
                ${reactionsHTML}
            `;
            
            // Mostrar modal com informa√ß√µes detalhadas
            document.getElementById('moleculeModalTitle').textContent = moleculeData.name;
            document.getElementById('moleculeModalDescription').textContent = moleculeData.description;
            document.getElementById('moleculeModalFormula').textContent = moleculeData.formula;
            document.getElementById('moleculeModal').style.display = 'flex';
        }

        function updateMoleculeList() {
            const moleculeList = document.getElementById('moleculeList');
            moleculeList.innerHTML = '';
            
            moleculesData.forEach(molecule => {
                const isAnalyzed = gameState.analyzedMolecules.includes(molecule.id);
                const moleculeItem = document.createElement('div');
                moleculeItem.className = `molecule-item ${isAnalyzed ? 'analyzed' : ''}`;
                moleculeItem.textContent = molecule.name;
                moleculeItem.addEventListener('click', function() {
                    if (isAnalyzed) {
                        showMoleculeInfo(molecule);
                    } else {
                        alert('Voc√™ ainda n√£o analisou esta mol√©cula! Clique nela na bancada para aprender sobre ela.');
                    }
                });
                
                moleculeList.appendChild(moleculeItem);
            });
        }

        function updateStats() {
            const analyzedCount = document.getElementById('analyzedCount');
            const experimentScore = document.getElementById('experimentScore');
            const knowledgeLevel = document.getElementById('knowledgeLevel');
            const progressBar = document.getElementById('progressBar');
            
            analyzedCount.textContent = gameState.analyzedMolecules.length;
            experimentScore.textContent = gameState.experimentScore;
            
            // Calcular n√≠vel de conhecimento
            const analysisPercentage = (gameState.analyzedMolecules.length / moleculesData.length) * 50;
            const experimentPercentage = (gameState.experimentScore / 10) * 50;
            gameState.knowledgeLevel = Math.min(analysisPercentage + experimentPercentage, 100);
            
            knowledgeLevel.textContent = `${Math.round(gameState.knowledgeLevel)}%`;
            progressBar.style.width = `${gameState.knowledgeLevel}%`;
        }

        function startExperiment() {
            // Embaralhar perguntas
            const shuffledQuestions = [...experimentQuestions].sort(() => Math.random() - 0.5);
            gameState.currentExperiment = shuffledQuestions.slice(0, 5); // Usar apenas 5 perguntas
            gameState.experimentAnswers = 0;
            gameState.totalExperimentQuestions = gameState.currentExperiment.length;
            
            // Mostrar container do experimento
            document.getElementById('experimentContainer').style.display = 'block';
            
            // Atualizar contadores
            document.getElementById('currentExperiment').textContent = '1';
            document.getElementById('totalExperiments').textContent = gameState.totalExperimentQuestions;
            document.getElementById('correctExperiments').textContent = '0';
            
            // Mostrar primeira pergunta
            showExperimentQuestion(0);
        }

        function showExperimentQuestion(index) {
            if (index >= gameState.currentExperiment.length) {
                endExperiment();
                return;
            }
            
            const question = gameState.currentExperiment[index];
            const experimentQuestion = document.getElementById('experimentQuestion');
            const experimentOptions = document.getElementById('experimentOptions');
            
            // Atualizar contador
            document.getElementById('currentExperiment').textContent = index + 1;
            
            // Mostrar pergunta
            experimentQuestion.textContent = question.question;
            
            // Mostrar op√ß√µes
            experimentOptions.innerHTML = '';
            question.options.forEach((option, i) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'experiment-option';
                optionElement.textContent = option;
                optionElement.addEventListener('click', function() {
                    checkExperimentAnswer(i, question.correct, index);
                });
                experimentOptions.appendChild(optionElement);
            });
        }

        function checkExperimentAnswer(selected, correct, questionIndex) {
            const options = document.querySelectorAll('.experiment-option');
            
            // Destacar resposta correta e incorreta
            options.forEach((option, i) => {
                if (i === correct) {
                    option.style.background = 'rgba(0, 200, 0, 0.5)';
                } else if (i === selected && i !== correct) {
                    option.style.background = 'rgba(200, 0, 0, 0.5)';
                }
                option.style.pointerEvents = 'none'; // Desabilitar cliques adicionais
            });
            
            // Atualizar pontua√ß√£o
            if (selected === correct) {
                gameState.experimentAnswers++;
                document.getElementById('correctExperiments').textContent = gameState.experimentAnswers;
            }
            
            // Pr√≥xima pergunta ap√≥s um breve delay
            setTimeout(() => {
                showExperimentQuestion(questionIndex + 1);
            }, 2000);
        }

        function endExperiment() {
            // Esconder container do experimento
            document.getElementById('experimentContainer').style.display = 'none';
            
            // Atualizar pontua√ß√£o total
            gameState.experimentScore += gameState.experimentAnswers;
            
            // Mostrar resultado
            alert(`Experimento conclu√≠do! Voc√™ acertou ${gameState.experimentAnswers} de ${gameState.totalExperimentQuestions} perguntas.`);
            
            // Atualizar estat√≠sticas
            updateStats();
        }

        function showCompletionModal() {
            document.getElementById('finalScore').textContent = gameState.experimentScore + gameState.analyzedMolecules.length * 10;
            document.getElementById('completionModal').style.display = 'flex';
        }

        // Funcionalidades do equipamento de laborat√≥rio
        function showRandomMoleculeDetail() {
            const analyzed = moleculesData.filter(m => gameState.analyzedMolecules.includes(m.id));
            if (analyzed.length > 0) {
                const randomMolecule = analyzed[Math.floor(Math.random() * analyzed.length)];
                const randomReaction = randomMolecule.reactions[Math.floor(Math.random() * randomMolecule.reactions.length)];
                
                document.getElementById('reactionEquation').innerHTML = `
                    <strong>${randomMolecule.name}</strong><br>
                    ${randomMolecule.formula}<br>
                    <div style="margin-top: 10px;">Rea√ß√£o: ${randomReaction.equation}</div>
                `;
            } else {
                alert('Analise pelo menos uma mol√©cula para usar o microsc√≥pio!');
            }
        }

        function separateMolecules() {
            const molecules = document.querySelectorAll('.molecule');
            molecules.forEach(molecule => {
                const x = Math.random() * (document.getElementById('labBench').offsetWidth - molecule.offsetWidth);
                const y = Math.random() * (document.getElementById('labBench').offsetHeight - molecule.offsetHeight);
                molecule.style.left = `${x}px`;
                molecule.style.top = `${y}px`;
            });
            document.getElementById('reactionEquation').textContent = 'Mol√©culas separadas pela centr√≠fuga!';
        }

        function analyzeComposition() {
            const unanalyzed = moleculesData.filter(m => !gameState.analyzedMolecules.includes(m.id));
            if (unanalyzed.length > 0) {
                const randomMolecule = unanalyzed[Math.floor(Math.random() * unanalyzed.length)];
                document.getElementById('reactionEquation').textContent = `Espectr√¥metro detectou: ${randomMolecule.name} (${randomMolecule.formula})`;
                
                // Dar uma dica visual
                const moleculeElement = document.getElementById(randomMolecule.id);
                moleculeElement.style.boxShadow = '0 0 20px #00c6ff';
                setTimeout(() => {
                    moleculeElement.style.boxShadow = '';
                }, 2000);
            } else {
                document.getElementById('reactionEquation').textContent = 'Todas as mol√©culas j√° foram analisadas!';
            }
        }

        function showRandomReaction() {
            const randomReaction = biochemicalReactions[Math.floor(Math.random() * biochemicalReactions.length)];
            
            document.getElementById('reactionModalTitle').textContent = randomReaction.name;
            document.getElementById('reactionModalEquation').textContent = randomReaction.equation;
            document.getElementById('reactionModalDescription').textContent = randomReaction.description;
            document.getElementById('reactionModal').style.display = 'flex';
            
            document.getElementById('reactionEquation').innerHTML = `
                <strong>${randomReaction.name}</strong><br>
                ${randomReaction.equation}
            `;
        }
    </script>
</body>
</html>
